# Dcm2Bids

Dcm2Bids convert DICOM files to [Brain Imaging Data Structure][bids] (BIDS).

Learn more about BIDS and read the [specifications][bids-spec].

## version: 0.2.1dev

# Usage

1. `dcm2bids -o <BIDS dir> -d <DICOM dir> -p <participant> -u <algorithm to parse your DICOM dir>`

2. `dcm2bids -o <BIDS dir> -d <DICOM dir> -j <json description file>`

It's possible to feed `dcm2bids` with a json file describing a participant. This json file is generated by default when you use the first example.

See `dcm2bids -h` for more information

# JSON file

```json
{
    "participant": "test", 
    "session": "V2",
    "acquisitions": [
        {
            "data_type": "dwi", 
            "directory": "EP2D_DIFF_64_DIRECTIONS_0007", 
            "suffix": "dwi"
        }, 
        {
            "custom_labels": {
                "dir": "pa"
            }, 
            "data_type": "fmap", 
            "directory": "EP2D_DIFF_PA_0014", 
            "suffix": "epi"
        }, 
        {
            "data_type": "anat", 
            "directory": "AXIAL_T1_MPRAGE_0005", 
            "suffix": "T1w"
        }, 
        {
            "custom_labels": {
                "dir": "ap"
            }, 
            "data_type": "fmap", 
            "directory": "EP2D_DIFF_AP_0013", 
            "suffix": "epi"
        }, 
        {
            "data_type": "anat", 
            "directory": "AXIAL_T2_SPACE_0006", 
            "suffix": "T2w"
        }
    ]
}
```

# Algorithm to parse DICOM directory

Every study is different and this step needs a little bit of work.

The logic is in `studyparser.py` and parse different part of the metadata to filter the DICOM directories.

# Metadata

[dcmstack][dcmstack] is used to extract metadata from DICOM files with default filtering.

IT IS YOUR RESPONSIBILITY TO KNOW IF THERE IS PRIVATE HEALTH INFORMATION IN THE METADATA EXTRACTED BY THIS PROGRAM.

# To Do

- find a more pleasant way for the user to enter algotithm
- compute specific metadata for dwi and func acquisitions
- test dataset
- add bids validator
- doc strings
- write test

[bids]: http://bids.neuroimaging.io/
[bids-spec]: http://bids.neuroimaging.io/#download
[dcmstack]: https://github.com/moloney/dcmstack
