{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"dcm2bids dcm2bids reorganises NIfTI files from dcm2niix into the Brain Imaging Data Structure (BIDS). Before using this software, learn more about BIDS: read the BIDS specifications and the paper some dataset examples Follow the guide Install pip install dcm2bids or pip install --user dcm2bids Dependencies dcm2niix to convert DICOM to NIfTI. You need to install it install instructions Recent release Upgrading pip install --upgrade dcm2bids TL;DR Steps to get your data in BIDS : cd <YOUR_FUTURE_BIDS_FOLDER> dcm2bids_scaffold dcm2bids_helper -d <FOLDER_WITH_DICOMS_OF_A_TYPICAL_SESSION> Build your configuration file with the help of the content of tmp_dcm2bids/helper dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -c CONFIG_FILE for each participants of your study dcm2bids creates log files inside <YOUR_FUTURE_BIDS_FOLDER>/tmp_dcm2bids/log bids-validator Run the bids-validator to check your directory. Don't forget to create a .bidsignore file at the root of your BIDS directory with tmp_dcm2bids/* inside. Similar projects Other tools to create BIDS datasets : heudiconv bidskit dac2bids","title":"Home"},{"location":"#dcm2bids","text":"dcm2bids reorganises NIfTI files from dcm2niix into the Brain Imaging Data Structure (BIDS). Before using this software, learn more about BIDS: read the BIDS specifications and the paper some dataset examples Follow the guide","title":"dcm2bids"},{"location":"#install","text":"pip install dcm2bids or pip install --user dcm2bids","title":"Install"},{"location":"#dependencies","text":"dcm2niix to convert DICOM to NIfTI. You need to install it install instructions Recent release","title":"Dependencies"},{"location":"#upgrading","text":"pip install --upgrade dcm2bids","title":"Upgrading"},{"location":"#tldr","text":"Steps to get your data in BIDS : cd <YOUR_FUTURE_BIDS_FOLDER> dcm2bids_scaffold dcm2bids_helper -d <FOLDER_WITH_DICOMS_OF_A_TYPICAL_SESSION> Build your configuration file with the help of the content of tmp_dcm2bids/helper dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -c CONFIG_FILE for each participants of your study dcm2bids creates log files inside <YOUR_FUTURE_BIDS_FOLDER>/tmp_dcm2bids/log","title":"TL;DR"},{"location":"#bids-validator","text":"Run the bids-validator to check your directory. Don't forget to create a .bidsignore file at the root of your BIDS directory with tmp_dcm2bids/* inside.","title":"bids-validator"},{"location":"#similar-projects","text":"Other tools to create BIDS datasets : heudiconv bidskit dac2bids","title":"Similar projects"},{"location":"advance/","text":"Advanced configuration These optional configurations could be insert in the configuration file at the same level as the \"descriptions\" entry. { \"searchMethod\": \"fnmatch\", \"defaceTpl\": \"pydeface --outfile {dstFile} {srcFile}\", \"description\": [ ... ] } searchMethod default: \"searchMethod\": \"fnmatch\" fnmatch is the behaviour (See criteria) by default and the fall back if this option is set incorrectly. re is the other choice if you want more flexibility to match criteria. defaceTpl default: \"defaceTpl\": None The anonymizer option no longer exists from v2.0.0 . It is still possible to deface the anatomical nifti images. For example, if you use the last version of pydeface, add: \"defaceTpl\": \"pydeface --outfile {dstFile} {srcFile}\" It is a template string and dcm2bids will replace {srcFile} and {dstFile} by the source file (input) and the destination file (output). dcm2niixOptions default: \"dcm2niixOptions\": \"-b y -ba y -z y -f '%3s_%f_%p_%t'\" Arguments for dcm2niix compKeys default: \"compKeys\": [\"SeriesNumber\", \"AcquisitionTime\", \"SidecarFilename\"] Acquisitions are sorted using the sidecar data. The default behaviour is to sort by SeriesNumber then by AcquisitionTime then by the SidecarFilename . You can change this behaviour setting this key inside the configuration file.","title":"Advanced configuration"},{"location":"advance/#advanced-configuration","text":"These optional configurations could be insert in the configuration file at the same level as the \"descriptions\" entry. { \"searchMethod\": \"fnmatch\", \"defaceTpl\": \"pydeface --outfile {dstFile} {srcFile}\", \"description\": [ ... ] }","title":"Advanced configuration"},{"location":"advance/#searchmethod","text":"default: \"searchMethod\": \"fnmatch\" fnmatch is the behaviour (See criteria) by default and the fall back if this option is set incorrectly. re is the other choice if you want more flexibility to match criteria.","title":"searchMethod"},{"location":"advance/#defacetpl","text":"default: \"defaceTpl\": None The anonymizer option no longer exists from v2.0.0 . It is still possible to deface the anatomical nifti images. For example, if you use the last version of pydeface, add: \"defaceTpl\": \"pydeface --outfile {dstFile} {srcFile}\" It is a template string and dcm2bids will replace {srcFile} and {dstFile} by the source file (input) and the destination file (output).","title":"defaceTpl"},{"location":"advance/#dcm2niixoptions","text":"default: \"dcm2niixOptions\": \"-b y -ba y -z y -f '%3s_%f_%p_%t'\" Arguments for dcm2niix","title":"dcm2niixOptions"},{"location":"advance/#compkeys","text":"default: \"compKeys\": [\"SeriesNumber\", \"AcquisitionTime\", \"SidecarFilename\"] Acquisitions are sorted using the sidecar data. The default behaviour is to sort by SeriesNumber then by AcquisitionTime then by the SidecarFilename . You can change this behaviour setting this key inside the configuration file.","title":"compKeys"},{"location":"config/","text":"Configuration file example { \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SidecarFilename\": \"006*\" \"ImageType\": [\"ORIG*\", \"PRIMARY\", \"M\", \"ND\", \"MOSAIC\"] } }, { \"dataType\": \"anat\", \"modalityLabel\": \"T2w\", \"criteria\": { \"SeriesDescription\": \"*T2*\", \"EchoTime\": 0.1 }, \"sidecarChanges\": { \"ProtocolName\": \"T2\" } }, { \"dataType\": \"fmap\", \"modalityLabel\": \"fmap\", \"intendedFor\": 0, \"criteria\": { \"ProtocoleName\": \"*field_mapping*\" } } ] } The descriptions field is a list of descriptions, each describing some acquisition. In this example, the configuration describes three acquisitions, a T2 weighted, resting state fMRI and a fieldmap. Each description tells dcm2bids how to group a set of acquisitions and how to label them. In this config file, Dcm2Bids is being told to collect files containing { \"SeriesDescription\": \"AXIAL_T2_SPACE\", \"EchoTime\": 0.1 } in their sidecars 1 and label them as anat , T2w type images. criteria dcm2bids will try to match the sidecars 1 of dcm2niix to the descriptions of the configuration file. The values you enter inside the criteria dictionary are patterns that will be compared to the corresponding key of the sidecar. The pattern matching is shell-style. It's possible to use wildcard * , single character ? etc ... Please have a look at the GNU documentation to know more. For example, in the second description, the pattern *T2* will be compared to the value of SeriesDescription of a sidecar. AXIAL_T2_SPACE will be a match, AXIAL_T1 won't. dcm2bids has a SidecarFilename key, as in the first description, if you prefer to also match with the filename of the sidecar. You can enter several criteria. All criteria must match for a description to be linked to a sidecar. dataType It is a mandatory field. Here is a definition from bids v1.2.0 : Data type - a functional group of different types of data. In BIDS we define six data types: func (task based and resting state functional MRI), dwi (diffusion weighted imaging), fmap (field inhomogeneity mapping data such as field maps), anat (structural imaging such as T1, T2, etc.), meg (magnetoencephalography), beh (behavioral). modalityLabel It is a mandatory field. It describes the modality of the acquisition like T1w , T2w or dwi , bold . customLabels It is an optional field. For some acquisitions, you need to add information in the file name. For resting state fMRI, it is usally task-rest . To know more on how to set these fields, read the BIDS specifications . For a longer example of a Dcm2Bids config json, see here . sidecarChanges Optional field to change or add information in a sidecar. intendedFor Optional field to add an IntendedFor entry in the sidecar of a fieldmap. Just put the index or a list of index of the description(s) that's intended for. Python index begins at 0 so in the example, 0 means it is intended for task-rest_bold . 1 : sidecars For each acquisition, dcm2niix creates an associated .json file, containing information from the dicom header. These are known as sidecars . These are the sidecars dcm2bids uses to filter the groups of acquisitions. To define this filtering you will probably need to review these sidecars. You can generate all the sidecars for an individual participant using dcm2bids_helper .","title":"Configuration file"},{"location":"config/#configuration-file-example","text":"{ \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SidecarFilename\": \"006*\" \"ImageType\": [\"ORIG*\", \"PRIMARY\", \"M\", \"ND\", \"MOSAIC\"] } }, { \"dataType\": \"anat\", \"modalityLabel\": \"T2w\", \"criteria\": { \"SeriesDescription\": \"*T2*\", \"EchoTime\": 0.1 }, \"sidecarChanges\": { \"ProtocolName\": \"T2\" } }, { \"dataType\": \"fmap\", \"modalityLabel\": \"fmap\", \"intendedFor\": 0, \"criteria\": { \"ProtocoleName\": \"*field_mapping*\" } } ] } The descriptions field is a list of descriptions, each describing some acquisition. In this example, the configuration describes three acquisitions, a T2 weighted, resting state fMRI and a fieldmap. Each description tells dcm2bids how to group a set of acquisitions and how to label them. In this config file, Dcm2Bids is being told to collect files containing { \"SeriesDescription\": \"AXIAL_T2_SPACE\", \"EchoTime\": 0.1 } in their sidecars 1 and label them as anat , T2w type images.","title":"Configuration file example"},{"location":"config/#criteria","text":"dcm2bids will try to match the sidecars 1 of dcm2niix to the descriptions of the configuration file. The values you enter inside the criteria dictionary are patterns that will be compared to the corresponding key of the sidecar. The pattern matching is shell-style. It's possible to use wildcard * , single character ? etc ... Please have a look at the GNU documentation to know more. For example, in the second description, the pattern *T2* will be compared to the value of SeriesDescription of a sidecar. AXIAL_T2_SPACE will be a match, AXIAL_T1 won't. dcm2bids has a SidecarFilename key, as in the first description, if you prefer to also match with the filename of the sidecar. You can enter several criteria. All criteria must match for a description to be linked to a sidecar.","title":"criteria"},{"location":"config/#datatype","text":"It is a mandatory field. Here is a definition from bids v1.2.0 : Data type - a functional group of different types of data. In BIDS we define six data types: func (task based and resting state functional MRI), dwi (diffusion weighted imaging), fmap (field inhomogeneity mapping data such as field maps), anat (structural imaging such as T1, T2, etc.), meg (magnetoencephalography), beh (behavioral).","title":"dataType"},{"location":"config/#modalitylabel","text":"It is a mandatory field. It describes the modality of the acquisition like T1w , T2w or dwi , bold .","title":"modalityLabel"},{"location":"config/#customlabels","text":"It is an optional field. For some acquisitions, you need to add information in the file name. For resting state fMRI, it is usally task-rest . To know more on how to set these fields, read the BIDS specifications . For a longer example of a Dcm2Bids config json, see here .","title":"customLabels"},{"location":"config/#sidecarchanges","text":"Optional field to change or add information in a sidecar.","title":"sidecarChanges"},{"location":"config/#intendedfor","text":"Optional field to add an IntendedFor entry in the sidecar of a fieldmap. Just put the index or a list of index of the description(s) that's intended for. Python index begins at 0 so in the example, 0 means it is intended for task-rest_bold .","title":"intendedFor"},{"location":"config/#1-sidecars","text":"For each acquisition, dcm2niix creates an associated .json file, containing information from the dicom header. These are known as sidecars . These are the sidecars dcm2bids uses to filter the groups of acquisitions. To define this filtering you will probably need to review these sidecars. You can generate all the sidecars for an individual participant using dcm2bids_helper .","title":"1: sidecars"},{"location":"tutorial/","text":"Setup Create a new folder for this tutorial. mkdir dcm2bids-tutorial cd dcm2bids-tutorial You can skip this part and go to the next section if dcm2niix and dcm2bids are already installed. The tutorial suppose that conda is installed and correctly setup on your computer. It is the easiest way to install dcm2bids and its dependencies on any OS. You should know that this is not the best way because conda does not always have the last version of dcm2niix. Create a new file environment.yml with your favorite text editor with this content: name: dcm2bids channels: - conda-forge dependencies: - dcm2niix - pip Finaly, create a new conda environment to install dcm2bids: conda env create -f environment.yml source activate dcm2bids pip install dcm2bids We should have access to dcm2bids now. Test it with dcm2bids --help . Scaffolding We can now run the command dcm2bids_scaffold . This gives us several generics folders and files. We can have a look at these files and consult the BIDS specification for more information. One of the created folders is named sourcedata , this is the folder to put your DICOMs Downloading test data For this tutorial, we will use DICOMs from neurolabusc on github. Go to : https://github.com/neurolabusc/dcm_qa_nih and click on the Clone or download button to download as ZIP. Move the zip file to the sourcedata folder and unzip it. Here is how to do it in the terminal but we could do it the way we want. mv ~/Downloads/dcm_qa_nih-master.zip sourcedata/ cd sourcedata unzip dcm_qa_nih-master.zip cd .. We should have now a dcm_qa_nih-master folder inside sourcedata. DICOM to NIfTI conversion dcm2bids_helper -d sourcedata/dcm_qa_nih-master/In/ This command will convert the DICOMs files to NIfTI files and save them inside tmp_dcm2bids/helper/ . We should see a list of compressed NIfTI files ( nii.gz ) with their resective sidecar files ( .json ). For this tutorial, we will only be interested in three acquisitions : 004_In_Axial_EPI-FMRI_(Interleaved_I_to_S)_20180918114023.nii.gz 004_In_EPI_PE=PA_20180918121230.nii.gz 003_In_EPI_PE=AP_20180918121230.nii.gz The first will be our resting state fMRI, the second and third our fieldmap EPI. When you will do it with your DICOMs, you should do it with a typical session of one of your participant. Building the configuration file Now we will create a configuration file called dcm2bids_config.json (this is just an example, it could be whatever we want) in the code/ folder. Use any text editor to create the file with the contents: { \"descriptions\": [] } For example, with our resting state fMRI we see in its sidecar that the field \"SeriesDescription\" is equal to \"Axial_EPI-FMRI_(Interleaved_I_to_S)\" . We can open 004_In_Axial_EPI-FMRI_(Interleaved_I_to_S)_20180918114023.json to verify that. This value could be match with a pattern \"Axial_EPI-FMRI*\" . Unfortunately, this criteria is not enough and could match other files. See 006_In_Axial_EPI-FMRI_(Interleaved_S_to_I)_20180918114023.json . In this case we could add another criteria to match the acquisition by the filename of the sidecar with the pattern \"*Interleaved_I_to_S*\" . With all this information we could then update our configuration file. { \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SeriesDescription\": \"Axial_EPI-FMRI*\", \"SidecarFilename\": \"*Interleaved_I_to_S*\" } } ] } For the two fieldmaps, we can see that with patterns of \"*EPI_PE=AP*\" or \"*EPI_PE=PA*\" on the filename is enough to match the correct acquisition. We could then update our configuration file. { \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SeriesDescription\": \"Axial_EPI-FMRI*\", \"SidecarFilename\": \"*Interleaved_I_to_S*\" } }, { \"dataType\": \"fmap\", \"modalityLabel\": \"epi\", \"customLabels\": \"dir-AP\", \"criteria\": { \"SidecarFilename\": \"*EPI_PE=AP*\" }, \"intendedFor\": 0 }, { \"dataType\": \"fmap\", \"modalityLabel\": \"epi\", \"customLabels\": \"dir-PA\", \"criteria\": { \"SidecarFilename\": \"*EPI_PE=PA*\" }, \"intendedFor\": 0 } ] } For fieldmap, we added an \"intendedFor\" field to show that these fieldmaps should be use with our fMRI acquisition. Have a look at the explanation of intendedFor in the documentation or in the BIDS specification . Running dcm2bids We can now run dcm2bids: dcm2bids -d sourcedata/dcm_qa_nih-master/In/ -p ID01 -c code/dcm2bids_config.json A bunch of information is print to the terminal and we can verify that the data are now in BIDS. $ ls sub-ID01/* sub-ID01/fmap: sub-ID01_dir-AP_epi.json sub-ID01_dir-AP_epi.nii.gz sub-ID01_dir-PA_epi.json sub-ID01_dir-PA_epi.nii.gz sub-ID01/func: sub-ID01_task-rest_bold.json sub-ID01_task-rest_bold.nii.gz Files that were not grabbed stay in a temporary folder tmp_dcm2bids/sub-{participant_id} . In our case : tmp_dcm2bids/sub-ID01 . Have a look at dcm2bids --help or the other pages of the documentation for more information.","title":"Tutorial"},{"location":"tutorial/#setup","text":"Create a new folder for this tutorial. mkdir dcm2bids-tutorial cd dcm2bids-tutorial You can skip this part and go to the next section if dcm2niix and dcm2bids are already installed. The tutorial suppose that conda is installed and correctly setup on your computer. It is the easiest way to install dcm2bids and its dependencies on any OS. You should know that this is not the best way because conda does not always have the last version of dcm2niix. Create a new file environment.yml with your favorite text editor with this content: name: dcm2bids channels: - conda-forge dependencies: - dcm2niix - pip Finaly, create a new conda environment to install dcm2bids: conda env create -f environment.yml source activate dcm2bids pip install dcm2bids We should have access to dcm2bids now. Test it with dcm2bids --help .","title":"Setup"},{"location":"tutorial/#scaffolding","text":"We can now run the command dcm2bids_scaffold . This gives us several generics folders and files. We can have a look at these files and consult the BIDS specification for more information. One of the created folders is named sourcedata , this is the folder to put your DICOMs","title":"Scaffolding"},{"location":"tutorial/#downloading-test-data","text":"For this tutorial, we will use DICOMs from neurolabusc on github. Go to : https://github.com/neurolabusc/dcm_qa_nih and click on the Clone or download button to download as ZIP. Move the zip file to the sourcedata folder and unzip it. Here is how to do it in the terminal but we could do it the way we want. mv ~/Downloads/dcm_qa_nih-master.zip sourcedata/ cd sourcedata unzip dcm_qa_nih-master.zip cd .. We should have now a dcm_qa_nih-master folder inside sourcedata.","title":"Downloading test data"},{"location":"tutorial/#dicom-to-nifti-conversion","text":"dcm2bids_helper -d sourcedata/dcm_qa_nih-master/In/ This command will convert the DICOMs files to NIfTI files and save them inside tmp_dcm2bids/helper/ . We should see a list of compressed NIfTI files ( nii.gz ) with their resective sidecar files ( .json ). For this tutorial, we will only be interested in three acquisitions : 004_In_Axial_EPI-FMRI_(Interleaved_I_to_S)_20180918114023.nii.gz 004_In_EPI_PE=PA_20180918121230.nii.gz 003_In_EPI_PE=AP_20180918121230.nii.gz The first will be our resting state fMRI, the second and third our fieldmap EPI. When you will do it with your DICOMs, you should do it with a typical session of one of your participant.","title":"DICOM to NIfTI conversion"},{"location":"tutorial/#building-the-configuration-file","text":"Now we will create a configuration file called dcm2bids_config.json (this is just an example, it could be whatever we want) in the code/ folder. Use any text editor to create the file with the contents: { \"descriptions\": [] } For example, with our resting state fMRI we see in its sidecar that the field \"SeriesDescription\" is equal to \"Axial_EPI-FMRI_(Interleaved_I_to_S)\" . We can open 004_In_Axial_EPI-FMRI_(Interleaved_I_to_S)_20180918114023.json to verify that. This value could be match with a pattern \"Axial_EPI-FMRI*\" . Unfortunately, this criteria is not enough and could match other files. See 006_In_Axial_EPI-FMRI_(Interleaved_S_to_I)_20180918114023.json . In this case we could add another criteria to match the acquisition by the filename of the sidecar with the pattern \"*Interleaved_I_to_S*\" . With all this information we could then update our configuration file. { \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SeriesDescription\": \"Axial_EPI-FMRI*\", \"SidecarFilename\": \"*Interleaved_I_to_S*\" } } ] } For the two fieldmaps, we can see that with patterns of \"*EPI_PE=AP*\" or \"*EPI_PE=PA*\" on the filename is enough to match the correct acquisition. We could then update our configuration file. { \"descriptions\": [ { \"dataType\": \"func\", \"modalityLabel\": \"bold\", \"customLabels\": \"task-rest\", \"criteria\": { \"SeriesDescription\": \"Axial_EPI-FMRI*\", \"SidecarFilename\": \"*Interleaved_I_to_S*\" } }, { \"dataType\": \"fmap\", \"modalityLabel\": \"epi\", \"customLabels\": \"dir-AP\", \"criteria\": { \"SidecarFilename\": \"*EPI_PE=AP*\" }, \"intendedFor\": 0 }, { \"dataType\": \"fmap\", \"modalityLabel\": \"epi\", \"customLabels\": \"dir-PA\", \"criteria\": { \"SidecarFilename\": \"*EPI_PE=PA*\" }, \"intendedFor\": 0 } ] } For fieldmap, we added an \"intendedFor\" field to show that these fieldmaps should be use with our fMRI acquisition. Have a look at the explanation of intendedFor in the documentation or in the BIDS specification .","title":"Building the configuration file"},{"location":"tutorial/#running-dcm2bids","text":"We can now run dcm2bids: dcm2bids -d sourcedata/dcm_qa_nih-master/In/ -p ID01 -c code/dcm2bids_config.json A bunch of information is print to the terminal and we can verify that the data are now in BIDS. $ ls sub-ID01/* sub-ID01/fmap: sub-ID01_dir-AP_epi.json sub-ID01_dir-AP_epi.nii.gz sub-ID01_dir-PA_epi.json sub-ID01_dir-PA_epi.nii.gz sub-ID01/func: sub-ID01_task-rest_bold.json sub-ID01_task-rest_bold.nii.gz Files that were not grabbed stay in a temporary folder tmp_dcm2bids/sub-{participant_id} . In our case : tmp_dcm2bids/sub-ID01 . Have a look at dcm2bids --help or the other pages of the documentation for more information.","title":"Running dcm2bids"},{"location":"usage/","text":"Introduction dcm2bids converts one session at a time. A session is all the acquisitions between the entry and exit of the participant in the scanner. You need to build a configuration file of your study to let dcm2bids associates your acquisitions through BIDS sidecar. Every study is different and this step needs a little bit of work. The scanner parameters should not change too much for one study (several MRI sessions), so a few configuration files should work. BIDS sidecar 1 files are JSON files with meta informations about the acquisition. dcm2niix (DICOM to NIfTI converter used by dcm2bids) creates automatically one BIDS sidecar for each NIfTI file. dcm2bids configuration file uses also the JSON format. One example is provided in the example folder on the github repository. It is recommended to use an editor with syntax highlighting to build a correct JSON file. Here is an online one. Usage How to launch dcm2bids when you have build your configuration file ? First cd in your BIDS directory. dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -c CONFIG_FILE If your participant have a session ID: dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -s SESSION_ID -c CONFIG_FILE dcm2bids creates log files inside tmp_dcm2bids/log See dcm2bids -h for more informations Output dcm2bids creates a sub-<PARTICIPANT_ID> directory in the output directory (by default the folder where the script is launched). Sidecars with one matching description will be convert to BIDS. If a file already exists, dcm2bids won't overwrite it. You should use the --clobber option to overwrite files. If a description matches several sidecars, dcm2bids will add automatically the custom label run- to the filename. Sidecars with no or more than one matching descriptions are kept in tmp_dcm2bids directory. Users can review these mismatches to change the configuration file accordingly. Tools Helper dcm2bids_helper -d DICOM_DIR [-o OUTPUT_DIR] To build the configuration file, you need to have a example of the sidecars. You can use dcm2bids_helper with the DICOMs of one participant. It will launch dcm2niix and save the result inside the tmp_dcm2bids/helper of the output directory. Scaffold dcm2bids_scaffold [-o OUTPUT_DIR] Create basic BIDS files and directories in the output directory (by default folder where the script is launched).","title":"Usage"},{"location":"usage/#introduction","text":"dcm2bids converts one session at a time. A session is all the acquisitions between the entry and exit of the participant in the scanner. You need to build a configuration file of your study to let dcm2bids associates your acquisitions through BIDS sidecar. Every study is different and this step needs a little bit of work. The scanner parameters should not change too much for one study (several MRI sessions), so a few configuration files should work. BIDS sidecar 1 files are JSON files with meta informations about the acquisition. dcm2niix (DICOM to NIfTI converter used by dcm2bids) creates automatically one BIDS sidecar for each NIfTI file. dcm2bids configuration file uses also the JSON format. One example is provided in the example folder on the github repository. It is recommended to use an editor with syntax highlighting to build a correct JSON file. Here is an online one.","title":"Introduction"},{"location":"usage/#usage","text":"How to launch dcm2bids when you have build your configuration file ? First cd in your BIDS directory. dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -c CONFIG_FILE If your participant have a session ID: dcm2bids -d DICOM_DIR -p PARTICIPANT_ID -s SESSION_ID -c CONFIG_FILE dcm2bids creates log files inside tmp_dcm2bids/log See dcm2bids -h for more informations","title":"Usage"},{"location":"usage/#output","text":"dcm2bids creates a sub-<PARTICIPANT_ID> directory in the output directory (by default the folder where the script is launched). Sidecars with one matching description will be convert to BIDS. If a file already exists, dcm2bids won't overwrite it. You should use the --clobber option to overwrite files. If a description matches several sidecars, dcm2bids will add automatically the custom label run- to the filename. Sidecars with no or more than one matching descriptions are kept in tmp_dcm2bids directory. Users can review these mismatches to change the configuration file accordingly.","title":"Output"},{"location":"usage/#tools","text":"Helper dcm2bids_helper -d DICOM_DIR [-o OUTPUT_DIR] To build the configuration file, you need to have a example of the sidecars. You can use dcm2bids_helper with the DICOMs of one participant. It will launch dcm2niix and save the result inside the tmp_dcm2bids/helper of the output directory. Scaffold dcm2bids_scaffold [-o OUTPUT_DIR] Create basic BIDS files and directories in the output directory (by default folder where the script is launched).","title":"Tools"},{"location":"versions/","text":"2.1.4 Add a tutorial to the documentation Update BIDS version in dcm2bids_scaffold Bug fix when intendedFor was equal to 0 Restructuring of the documentation and add version description 2.1.3 dicom_dir can be a list or str 2.1.2 Add documentation with mkdocs Bug fix in dcm2niix_version 2.1.1 Bug fix 2.1.0 Checking if a new version of dcm2bids or dcm2niix is available on github dcm2niix output is now log to file as debug Add dcm2bids version to sidecars intendedFor option can also be a list 2.0.0 The anonymizer option no longer exists from the script dcm2bids. It is still possible to deface the anatomical nifti images using the \"defaceTpl\" key in the congifuration file. Acquisitions are now sorted using the sidecar data instead of only the sidecar filename. The default behaviour is to sort by SeriesNumber then by AcquisitionTime then by the SidecarFilename . You can change this behaviour setting the key \"compKeys\" inside the configuration file. Add an option to use re for more flexibility for matching criteria. Set the key \"searchMethod\" to \"re\" in the config file. fnmatch is still the default. Design fix in matching with list in the sidecar. Sidecar modification using \"sidecarChanges\" in the configuration file. intendedFor option for fieldmap in the configuration file log improvement major code refactoring add docstrings add tests with pytest 1.1.8 Add dcm2bids as runscript inside Singularity Remove logger from dcm2bids_helper","title":"Versions"},{"location":"versions/#214","text":"Add a tutorial to the documentation Update BIDS version in dcm2bids_scaffold Bug fix when intendedFor was equal to 0 Restructuring of the documentation and add version description","title":"2.1.4"},{"location":"versions/#213","text":"dicom_dir can be a list or str","title":"2.1.3"},{"location":"versions/#212","text":"Add documentation with mkdocs Bug fix in dcm2niix_version","title":"2.1.2"},{"location":"versions/#211","text":"Bug fix","title":"2.1.1"},{"location":"versions/#210","text":"Checking if a new version of dcm2bids or dcm2niix is available on github dcm2niix output is now log to file as debug Add dcm2bids version to sidecars intendedFor option can also be a list","title":"2.1.0"},{"location":"versions/#200","text":"The anonymizer option no longer exists from the script dcm2bids. It is still possible to deface the anatomical nifti images using the \"defaceTpl\" key in the congifuration file. Acquisitions are now sorted using the sidecar data instead of only the sidecar filename. The default behaviour is to sort by SeriesNumber then by AcquisitionTime then by the SidecarFilename . You can change this behaviour setting the key \"compKeys\" inside the configuration file. Add an option to use re for more flexibility for matching criteria. Set the key \"searchMethod\" to \"re\" in the config file. fnmatch is still the default. Design fix in matching with list in the sidecar. Sidecar modification using \"sidecarChanges\" in the configuration file. intendedFor option for fieldmap in the configuration file log improvement major code refactoring add docstrings add tests with pytest","title":"2.0.0"},{"location":"versions/#118","text":"Add dcm2bids as runscript inside Singularity Remove logger from dcm2bids_helper","title":"1.1.8"}]}